# System Architecture

This document describes the high-level architecture and data flow of the Strategyâ€“Action Synchronization AI application, including the core RAG/LLM components and supporting services.

## Topology Diagram

```mermaid
graph TD
%% Services
svcazurecontainerapps_strategysyncapp["`Name: strategy-sync-app\nPath: app/streamlit_app.py\nLanguage: python\nPort: 8501\nDockerFile: ../../../../..\nDocker Context: ../../../../..`"]
subgraph "Compute Resources"
%% Resources
subgraph containerappenv["Azure Container Apps (ACA) Environment"]
azurecontainerapps_strategysyncapp("`strategy-sync-app (Azure Container App)`")
end
containerappenv:::cluster
end
subgraph "Dependency Resources"
%% Dependency Resources
azureopenai_azureopenai["`azure-openai (Azure Open AI)`"]
azureapplicationinsights_appinsights["`app-insights (Azure Application Insights)`"]
azurestorageaccount_storageshared["`storage-shared (Azure Storage Account)`"]
azurecontainerregistry_acrregistry["`acr-registry (azurecontainerregistry)`"]
azurekeyvault_keyvault["`key-vault (Azure Key Vault)`"]
end
%% Relationships
svcazurecontainerapps_strategysyncapp --> |"hosted on"| azurecontainerapps_strategysyncapp
azurecontainerapps_strategysyncapp -.-> |"secret"| azureopenai_azureopenai
azurecontainerapps_strategysyncapp -.-> |"system-identity"| azureapplicationinsights_appinsights
azurecontainerapps_strategysyncapp -.-> |"system-identity"| azurestorageaccount_storageshared
azurecontainerapps_strategysyncapp -.-> |"secret"| azurecontainerregistry_acrregistry
azurecontainerapps_strategysyncapp -.-> |"system-identity"| azurekeyvault_keyvault
```

## Data Flow

- User interacts with `strategy-sync-app` (Streamlit) UI to upload or select sample strategic and action plans.
- `AlignmentEngine` embeds strategies/actions, indexes actions in a persistent vector store and computes cosine similarity for top-K matches.
- Alignment results (per-strategy averages, labels, overall score, coverage) are computed and displayed via Plotly visualizations.
- Optional `RAGEngine` builds a structured prompt using current metrics and retrieved actions, invoking Azure OpenAI (or falling back to deterministic rules) to generate improvement suggestions, KPIs, timelines, and risks.
- Outputs (JSON and CSV) are written to durable storage and made available for download from the UI.
- Application telemetry is sent to Azure Application Insights; secrets (e.g., model API keys) are stored and accessed securely via Key Vault; container images are stored in Azure Container Registry if containerization is used.

## Notes

- Supported hosting technologies: appservice, function, containerapp, staticwebapp, aks.
- Supported bindings for the topology: azureaisearch, azureaiservices, appservicemanagedinstance, azureapplicationinsights, azurebotservice, azurecosmosdb, azurekeyvault, azuredatabaseformysql, azureopenai, azuredatabaseforpostgresql, azureprivateendpoint, azurecacheforredis, azuresqldatabase, azurestorageaccount, azureservicebus, azuresignalrservice, azurevirtualnetwork, azurewebpubsub, azurecontainerregistry.